import{_ as o}from"./map-tileLayer-lod-681a2574.js";import{_ as l,r,o as c,c as p,a,b as e,d as t,e as s}from"./app-a7594ec8.js";const i="/doc/assets/data-xyzDown-sjz1-096c1561.jpg",d="/doc/assets/data-xyzDown-sjz2-b3c9ba4d.jpg",h="/doc/assets/data-xyzDown-sjz3-b617ead3.jpg",_="/doc/assets/data-xyzDown-sjz4-7dfdda6c.jpg",u="/doc/assets/data-xyzDown-sjz5-5685165a.jpg",m="/doc/assets/data-xyzDown-sjz6-743eeedb.jpg",b="/doc/assets/data-xyzDown-sjz7-5abe878d.jpg",x="/doc/assets/data-xyzDown-sjz8-943dcb8d.jpg",y={},z=s('<h3>瓦片底图：在线地图的下载和使用</h3><h2 id="_1-xyz-瓦片金字塔介绍" tabindex="-1"><a class="header-anchor" href="#_1-xyz-瓦片金字塔介绍" aria-hidden="true">#</a> 1. XYZ 瓦片金字塔介绍</h2><h3 id="瓦片金字塔基本概念" tabindex="-1"><a class="header-anchor" href="#瓦片金字塔基本概念" aria-hidden="true">#</a> 瓦片金字塔基本概念</h3><p>要理解互联网地图或者说目前所有的在线地图，一定要理解“瓦片金字塔”这个概念。</p><p>目前我们所见的所有地图底图服务都是瓦片地图的方式发布的。瓦片地图金字塔模型是一种多分辨率层次模型，从瓦片金字塔的底层到顶层，分辨率越来越低，但表示的地理范围不变。</p><p>当我们建立好了影像金字塔后，前端再请求地图时，则将只是在切好的瓦片缓存中，找到对应级别里对应的瓦片即可。然后在前端将这些请求到的瓦片拼接出来，便可以得到用户需要的级别下的可视范围内的瓦片了。 <img src="'+o+'" alt="配置图"></p><h3 id="地图-url-的-xyz-参数" tabindex="-1"><a class="header-anchor" href="#地图-url-的-xyz-参数" aria-hidden="true">#</a> 地图 URL 的 XYZ 参数</h3><p>知道了地图是有很多瓦片组成，而每一张瓦片有对应的瓦片等级（z）和瓦片坐标编号（x, y），目前互联网地图也是通过 xyz 值是可以找到对应的瓦片的。</p><p>常见互联网地图的 xyz 地址：</p><p>高德地图: <code>http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&amp;size=1&amp;scale=1&amp;style=8&amp;x={x}&amp;y={y}&amp;z={z}</code></p><p>高德影像: <code>http://webst01.is.autonavi.com/appmaptile?style=6&amp;x={x}&amp;y={y}&amp;z={z}</code></p><p>Google 地图:<code> http://mt1.google.cn/vt/lyrs=m@207000000&amp;hl=zh-CN&amp;gl=CN&amp;src=app&amp;x={x}&amp;y={y}&amp;z={z}&amp;s=Galile</code></p><p>Google 影像: <code>http://mt1.google.cn/vt/lyrs=s&amp;hl=zh-CN&amp;gl=CN&amp;x={x}&amp;y={y}&amp;z={z}&amp;s=Gali</code></p>',13),g={href:"http://mars2d.cn/api/TileLayer.html",target:"_blank",rel:"noopener noreferrer"},f=s(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> tileLayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mars2d<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>TileLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&amp;size=1&amp;scale=1&amp;style=8&amp;x={x}&amp;y={y}&amp;z={z}&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>tileLayer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-下载互联网地图数据" tabindex="-1"><a class="header-anchor" href="#_2-下载互联网地图数据" aria-hidden="true">#</a> 2. 下载互联网地图数据</h2>`,2),k=a("br",null,null,-1),w={href:"https://mobac.sourceforge.io/",target:"_blank",rel:"noopener noreferrer"},v={href:"https://github.com/ShareQiu1994/node-map-download",target:"_blank",rel:"noopener noreferrer"},j=a("br",null,null,-1),D={href:"http://www.rivermap.cn/down.html",target:"_blank",rel:"noopener noreferrer"},L={href:"http://www.arctiler.com/index.html",target:"_blank",rel:"noopener noreferrer"},N={href:"http://www.bigemap.com/index.html",target:"_blank",rel:"noopener noreferrer"},G=a("h2",{id:"_3-处理操作流程完整示例",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#_3-处理操作流程完整示例","aria-hidden":"true"},"#"),e(" 3. 处理操作流程完整示例")],-1),C=a("h3",{id:"_3-1-下载-xyz-瓦片数据",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#_3-1-下载-xyz-瓦片数据","aria-hidden":"true"},"#"),e(" 3.1 下载 XYZ 瓦片数据")],-1),T={href:"http://www.rivermap.cn/down.html",target:"_blank",rel:"noopener noreferrer"},X=a("br",null,null,-1),Y=a("br",null,null,-1),Z=a("img",{src:i,alt:"配置图"},null,-1),B=a("br",null,null,-1),E=a("br",null,null,-1),V=a("img",{src:d,alt:"配置图"},null,-1),I=a("br",null,null,-1),M=a("br",null,null,-1),q=a("img",{src:h,alt:"配置图"},null,-1),A=a("br",null,null,-1),P=a("br",null,null,-1),S=a("img",{src:_,alt:"配置图"},null,-1),H=a("br",null,null,-1),Q=a("br",null,null,-1),R=a("img",{src:u,alt:"配置图"},null,-1),U=a("br",null,null,-1),$=a("br",null,null,-1),F=a("img",{src:m,alt:"配置图"},null,-1),J=a("br",null,null,-1),K=a("br",null,null,-1),O=a("img",{src:b,alt:"配置图"},null,-1),W=a("br",null,null,-1),aa=a("br",null,null,-1),ea=a("img",{src:x,alt:"配置图"},null,-1),na=a("br",null,null,-1),ta=s('<h3 id="_3-2-发布二维数据为-http-服务" tabindex="-1"><a class="header-anchor" href="#_3-2-发布二维数据为-http-服务" aria-hidden="true">#</a> 3.2 发布二维数据为 HTTP 服务</h3><p>因为地图瓦片数据一般都很大，建议发布为独立服务。<br> 可以参考教程<a href="">发布地图数据服务</a></p><ul><li>可以将导出目录 exp 进行发布为服务<code>http://localhost:8888/mars2d-data/tile/anhui</code></li><li>发布为服务后，首先验证下随意找一张图片，可以在浏览器可以直接访问，正常加载， 如 <code>http://localhost:8888/mars2d-data/tile/anhui/8/210/102.jpg</code></li></ul><h3 id="_3-3-在平台中加载模型" tabindex="-1"><a class="header-anchor" href="#_3-3-在平台中加载模型" aria-hidden="true">#</a> 3.3 在平台中加载模型</h3>',4),sa={href:"http://mars2d.cn/editor.html?id=layer-tile/type/xyz",target:"_blank",rel:"noopener noreferrer"},oa=a("code",null," http://localhost:8888/mapdata/exp/{z}/{x}/{y}.jpg",-1),la={href:"http://mars2d.cn/doc.html#data/guide/map/tileLayer",target:"_blank",rel:"noopener noreferrer"};function ra(ca,pa){const n=r("ExternalLinkIcon");return c(),p("div",null,[z,a("p",null,[e("知道了 xyz 的地址后，我们平台的代码中就可以使用"),a("a",g,[e("TileLayer"),t(n)]),e("类来加载地图，例如加载瓦片可以这样写：")]),f,a("p",null,[e("知道了 xyz 的概念，我们就很容易理解去如何下载地图数据了，就是根据需要的地区范围确定 xyz 的范围值，轮询下载就可以了，自己写工具要考虑很多细节问题，不用重复造轮子， 目前市场上有很多相关工具。"),k,e(" 免费工具："),a("a",w,[e(" MobileAtlasCreator"),t(n)]),e("  "),a("a",v,[e("Github 开源的代码工具"),t(n)]),j,e(" 商业收费工具："),a("a",D,[e("水经微图"),t(n)]),e("."),a("a",L,[e(" 太乐地图"),t(n)]),e("."),a("a",N,[e(" BIGEMAP"),t(n)])]),G,C,a("p",null,[e("下面我们已："),a("a",T,[e("水经微图"),t(n)]),e("为例来介绍下载的流程。"),X,e(" 1.运行程序后主界面如下，根据需要选择需要下载的地图。"),Y,Z,B,e(" 2.我们一般是按行政区划下载地图，也可以绘制区域或其他方式下载，行政区域选择需要下载的地图范围，选择后图上会同步显示范围。 也可以点击地图左上角选择工具，选择感兴趣的区域， 支持按矩形. 不规则多边形，一般可以按省/市区域下载。"),E,V,I,e(" 3.点击下载，进入到下载参数设置界面。根据需要设置合适的任务名称，这里以下载标准金字塔为例。注意此处的级别从 1 开始，比地图中的级别多 1，即 19 级对应实际地图中第 18 级。"),M,q,A,e(" 4.点击“确定后”进入到下载界面，等待下载完成，右侧为下载时的状态"),P,S,H,e(" 5.下载完成后选择 “导出”"),Q,R,U,e(" 6.弹出的窗口中按下图所示设置参数【重要】。"),$,F,J,e(" 7.导出完成后软件会自动打开导出的目录文件夹，会出现相应的数字目录即该下载的瓦片数据"),K,O,W,e(" 8.在数据量比较大的情况，直接拷贝切片会很慢很慢。一般操作是分层压缩成压缩包（并按 4G 分卷），拷贝至服务器后再进行解压。"),aa,ea,na,e(" 9.全部压缩完成后拷贝数据到需要发布电脑上或上传网盘。")]),ta,a("p",null,[e("可以在 Mars2D 框架中打开"),a("a",sa,[e("XYZ 瓦片示例页面"),t(n)]),e("，在这个页面的根据已有示例修改 url 地址"),oa,e("，来调试图层参数。")]),a("p",null,[e("可以参考教程"),a("a",la,[e("加载 XYZ 数据步骤"),t(n)])])])}const ha=l(y,[["render",ra],["__file","xyzDown.html.vue"]]);export{ha as default};
